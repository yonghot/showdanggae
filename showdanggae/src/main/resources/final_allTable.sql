
-- 테이블 생성 순서 : MEMBER -> MAIN_CATEGORY -> MEMBER_CATEGORY ->  PRODUCT -> ITEM -> 나머지
DROP TABLE MEMBER CASCADE CONSTRAINT;  -- 제약조건 있는 테이블은 이렇게 삭제...하면 제약조건들이 없어져서 되는거다
CREATE TABLE MEMBER(
	MEMBER_ID VARCHAR2(100) PRIMARY KEY,
	PASSWORD VARCHAR2(100) NOT NULL,
	MEMBER_NAME VARCHAR2(100) NOT NULL,
	EMAIL VARCHAR2(100) NOT NULL,
	BIRTHDAY DATE NOT NULL,
	REPORT NUMBER DEFAULT 0
);

DROP TABLE MAIN_CATEGORY CASCADE CONSTRAINT;
CREATE TABLE MAIN_CATEGORY (
	CATEGORY VARCHAR2(100) PRIMARY KEY
);

DROP TABLE MEMBER_CATEGORY CASCADE CONSTRAINT;
CREATE TABLE MEMBER_CATEGORY (
	CATEGORY_ID NUMBER PRIMARY KEY,
	CATEGORY VARCHAR2(100) NOT NULL,
	MEMBER_ID VARCHAR2(100) NOT NULL,
	CONSTRAINT FK_CATEGORY_MAIN FOREIGN KEY(CATEGORY) REFERENCES MAIN_CATEGORY(CATEGORY),
	CONSTRAINT FK_CATEGORY_MEMBER_ID FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(MEMBER_ID)
);

DROP TABLE PRODUCT CASCADE CONSTRAINT;
CREATE TABLE PRODUCT (
	PRODUCT_ID NUMBER PRIMARY KEY,
	CATEGORY_ID NUMBER NOT NULL,
	MEMBER_ID VARCHAR2(100) NOT NULL,
	PRODUCT_NAME VARCHAR2(100) NOT NULL,
	LIKES NUMBER DEFAULT 0,
	DISLIKES NUMBER DEFAULT 0,
	HITS NUMBER DEFAULT 0,
	REVIEW CLOB,
	REVIEW_SCORE NUMBER DEFAULT 0,
	DETAIL CLOB,
	VISIBLITY NUMBER DEFAULT 0,
	REGIST_DATE DATE NOT NULL,
	CONSTRAINT FK_PRODUCT_CATEGORY_ID FOREIGN KEY(CATEGORY_ID) REFERENCES MEMBER_CATEGORY(CATEGORY_ID),
	CONSTRAINT FK_PRODUCT_MEMBER_ID FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(MEMBER_ID)
);

DROP TABLE ITEM CASCADE CONSTRAINT;
CREATE TABLE ITEM (
	ITEM VARCHAR2(100) PRIMARY KEY
);


DROP TABLE SELLER_LINK CASCADE CONSTRAINT;
CREATE TABLE SELLER_LINK (
	LINK VARCHAR2(300) NOT NULL,
	PRODUCT_ID NUMBER NOT NULL,
	PRICE NUMBER NOT NULL,
	CONSTRAINT FK_SELLER_LINK_PRODUCT_ID FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
	CONSTRAINT PK_SELLER_LINK PRIMARY KEY (LINK, PRODUCT_ID)
);

DROP TABLE EVAL_ITEM CASCADE CONSTRAINT;
CREATE TABLE EVAL_ITEM (
	ITEM VARCHAR2(100) NOT NULL,
	PRODUCT_ID NUMBER NOT NULL,
	ITEM_POINT NUMBER DEFAULT 0,
	CONSTRAINT FK_EVAL_ITEM_ITEM FOREIGN KEY(ITEM) REFERENCES ITEM(ITEM),
	CONSTRAINT FK_EVAL_ITEMT_PRODUCT_ID FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
	CONSTRAINT PK_EVAL_ITEM PRIMARY KEY (ITEM, PRODUCT_ID)
);


DROP TABLE NOTICEBOARD;
CREATE TABLE NOTICEBOARD(
	NO NUMBER PRIMARY KEY,
	TITLE VARCHAR2(100) NOT NULL,
	WRITER VARCHAR2(100) NOT NULL,
	CONTENT CLOB NOT NULL,
	HIT NUMBER DEFAULT 0,
	WRITEDATE DATE NOT NULL
);


DROP TABLE QNABOARD CASCADE CONSTRAINT;
CREATE TABLE QNABOARD(
	NO NUMBER PRIMARY KEY,
	TITLE VARCHAR2(100) NOT NULL,
	MEMBER_ID VARCHAR2(100) NOT NULL,
	WRITER VARCHAR2(100) NOT NULL,
	CONTENT CLOB NOT NULL,
	WRITEDATE DATE NOT NULL,
	VIEWCOUNT NUMBER DEFAULT 0,
	REF NUMBER DEFAULT 0, 
	RESTEP NUMBER DEFAULT 0, 
	RELEVEL NUMBER DEFAULT 0,
	TOTAL NUMBER DEFAULT 0,
	CONSTRAINT MEMBER_ID FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(MEMBER_ID)
);

DROP TABLE QNACOMMENT CASCADE CONSTRAINT;
CREATE TABLE QNACOMMENT(
	CNO NUMBER PRIMARY KEY,
	NO NUMBER NOT NULL,
	MEMBER_NAME VARCHAR2(100) NOT NULL,
	MEMBER_ID VARCHAR2(100) NOT NULL,
	REPLYCOMMENT CLOB NOT NULL,
	COMMENTDATE DATE NOT NULL,
	CONSTRAINT NO FOREIGN KEY(NO) REFERENCES QNABOARD(NO),
	CONSTRAINT FK_QNACOMMENT FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(MEMBER_ID)
);

DROP TABLE MESSAGE CASCADE CONSTRAINT;
CREATE TABLE MESSAGE (
	MNO NUMBER PRIMARY KEY,
	MEMBER_ID VARCHAR2(100),
	MESSAGE CLOB NOT NULL,
	SENDER VARCHAR2(100) NOT NULL,
	TITLE VARCHAR2(100) NOT NULL,
	SEND_DATE DATE NOT NULL,
	READ NUMBER DEFAULT 0,
	CONSTRAINT FK_MESSAGE_MEMBER_ID FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(MEMBER_ID)
);


DROP TABLE FOLLOW CASCADE CONSTRAINT;
CREATE TABLE FOLLOW(
	FOLLOWING_DATE DATE NOT NULL,
	FOLLOWING VARCHAR2(100) NOT NULL,
	FOLLOWER VARCHAR2(100) NOT NULL,
	CONSTRAINT FK_FOLLOWING_MEMBER_ID FOREIGN KEY(FOLLOWING) REFERENCES MEMBER(MEMBER_ID),
	CONSTRAINT FK_FOLLOWER_MEMBER_ID FOREIGN KEY(FOLLOWER) REFERENCES MEMBER(MEMBER_ID),
	CONSTRAINT PK_FOLLOW PRIMARY KEY(FOLLOWING, FOLLOWER)
);


DROP TABLE INTEREST CASCADE CONSTRAINT;
CREATE TABLE INTEREST (
	CATEGORY VARCHAR2(100) NOT NULL,
	MEMBER_ID VARCHAR2(100) NOT NULL,
	CONSTRAINT FK_INTEREST_MAIN FOREIGN KEY(CATEGORY) REFERENCES MAIN_CATEGORY(CATEGORY),
	CONSTRAINT FK_INTEREST_MEMBER_ID FOREIGN KEY(MEMBER_ID) REFERENCES MEMBER(MEMBER_ID),
	CONSTRAINT PK_INTEREST PRIMARY KEY (CATEGORY, MEMBER_ID)
);


-- 총 12개 테이블
------------------------------------------------------------------------------------------------------------

DROP SEQUENCE PRODUCT_SEQ;
DROP SEQUENCE MEMBER_CATEGORY_SEQ; 
DROP SEQUENCE MESSAGE_SEQ;
DROP SEQUENCE NOTICE_SEQ;
DROP SEQUENCE QNA_SEQ;
DROP SEQUENCE QNACOMMENT_SEQ;

CREATE SEQUENCE PRODUCT_SEQ;
CREATE SEQUENCE MEMBER_CATEGORY_SEQ; 
CREATE SEQUENCE MESSAGE_SEQ;
CREATE SEQUENCE NOTICE_SEQ;
CREATE SEQUENCE QNA_SEQ;
CREATE SEQUENCE QNACOMMENT_SEQ;
------------------------------------------------------------------------------------------------------------

INSERT INTO MEMBER(MEMBER_ID, PASSWORD, MEMBER_NAME, EMAIL, BIRTHDAY) VALUES('JAVA','1234','김용호','BLUE@BLUEPRINT.COM', TO_DATE('880307','RRMMDD'));
INSERT INTO MEMBER(MEMBER_ID, PASSWORD, MEMBER_NAME, EMAIL, BIRTHDAY) VALUES('JAVA1','1234','김용호','BLUE@BLUEPRINT.COM', TO_DATE('880307','RRMMDD'));
INSERT INTO MEMBER(MEMBER_ID, PASSWORD, MEMBER_NAME, EMAIL, BIRTHDAY) VALUES('JAVA2','1234','김용호','BLUE@BLUEPRINT.COM', TO_DATE('880307','RRMMDD'));
INSERT INTO MEMBER(MEMBER_ID, PASSWORD, MEMBER_NAME, EMAIL, BIRTHDAY) VALUES('ADMINGALBAGE','1234','관리자','ADMIN@SHOWDANGGAE.COM', TO_DATE('120204','RRMMDD')); 
INSERT INTO MEMBER(MEMBER_ID, PASSWORD, MEMBER_NAME, EMAIL, BIRTHDAY) VALUES('DD','DD','DD','ASDSDSDIN@SHOWDANGGAE.COM', TO_DATE('120204','RRMMDD')); 
INSERT INTO MEMBER(MEMBER_ID, PASSWORD, MEMBER_NAME, E
MAIL, BIRTHDAY) VALUES('ADMIN','1234','DD','ASDSDSDIN@SHOWDANGGAE.COM', TO_DATE('120204','RRMMDD')); 
INSERT INTO MEMBER(MEMBER_ID, PASSWORD, MEMBER_NAME, EMAIL, BIRTHDAY) VALUES('lipchel','1234','유서정','LIPCHEL@NAVER.COM', TO_DATE('880307','RRMMDD'));
INSERT INTO MEMBER(MEMBER_ID, PASSWORD, MEMBER_NAME, EMAIL, BIRTHDAY) VALUES('aaa','aaa','유서정','lipchel@naver.com', TO_DATE('880307','RRMMDD'));


INSERT INTO MAIN_CATEGORY(CATEGORY) VALUES('노트북');
INSERT INTO MAIN_CATEGORY(CATEGORY) VALUES('카메라');
INSERT INTO MAIN_CATEGORY(CATEGORY) VALUES('화장품');


INSERT INTO MEMBER_CATEGORY(CATEGORY_ID, CATEGORY, MEMBER_ID) VALUES('1', '노트북','JAVA');
INSERT INTO MEMBER_CATEGORY(CATEGORY_ID, CATEGORY, MEMBER_ID) VALUES('2', '화장품','JAVA');
INSERT INTO MEMBER_CATEGORY(CATEGORY_ID, CATEGORY, MEMBER_ID) VALUES('3', '노트북','DD');
INSERT INTO MEMBER_CATEGORY(CATEGORY_ID, CATEGORY, MEMBER_ID) VALUES('4', '노트북','DD');


INSERT INTO INTEREST(CATEGORY, MEMBER_ID) VALUES('노트북','JAVA');
INSERT INTO INTEREST(CATEGORY, MEMBER_ID) VALUES('화장품','JAVA');
INSERT INTO INTEREST(CATEGORY, MEMBER_ID) VALUES('노트북','DD');


INSERT INTO ITEM(ITEM) VALUES('가성비');
INSERT INTO ITEM(ITEM) VALUES('디자인');
INSERT INTO ITEM(ITEM) VALUES('AS');


INSERT INTO NOTICEBOARD(NO,TITLE,WRITER,CONTENT,WRITEDATE) 
VALUES(NOTICE_SEQ.NEXTVAL,'공지사항입니다','관리자','방가방가',SYSDATE);
INSERT INTO NOTICEBOARD(NO,TITLE,WRITER,CONTENT,WRITEDATE)
VALUES(NOTICE_SEQ.NEXTVAL,'공지사항입니다','관리자','방가방가',SYSDATE);
INSERT INTO NOTICEBOARD(NO,TITLE,WRITER,CONTENT,WRITEDATE) 
VALUES(NOTICE_SEQ.NEXTVAL,'공지사항입니다','관리자','방가방가',SYSDATE);
INSERT INTO NOTICEBOARD(NO,TITLE,WRITER,CONTENT,WRITEDATE) 
VALUES(NOTICE_SEQ.NEXTVAL,'공지사항입니다','관리자','방가방가',SYSDATE);
INSERT INTO NOTICEBOARD(NO,TITLE,WRITER,CONTENT,WRITEDATE) 
VALUES(NOTICE_SEQ.NEXTVAL,'공지사항입니다','관리자','방가방가',SYSDATE);
INSERT INTO NOTICEBOARD(NO,TITLE,WRITER,CONTENT,WRITEDATE) 
VALUES(NOTICE_SEQ.NEXTVAL,'공지사항입니다','관리자','방가방가',SYSDATE);



INSERT INTO QNABOARD(NO, MEMBER_ID, TITLE, WRITER, CONTENT, WRITEDATE) 
VALUES(QNA_SEQ.NEXTVAL, 'JAVA','이 서비스는 도대체','김용호', '언제 개발 완료 되는거죠?', SYSDATE);
INSERT INTO QNABOARD(NO, MEMBER_ID, TITLE, WRITER, CONTENT, WRITEDATE) 
VALUES(QNA_SEQ.NEXTVAL, 'JAVA','이 서비스는 도대체','김용호', '언제 개발 완료 되는거죠?', SYSDATE);
INSERT INTO QNABOARD(NO, MEMBER_ID, TITLE, WRITER, CONTENT, WRITEDATE) 
VALUES(QNA_SEQ.NEXTVAL, 'JAVA','이 서비스는 도대체','김용호', '언제 개발 완료 되는거죠?', SYSDATE);
INSERT INTO QNABOARD(NO, MEMBER_ID, TITLE, WRITER, CONTENT, WRITEDATE) 
VALUES(QNA_SEQ.NEXTVAL, 'JAVA','이 서비스는 도대체','김용호', '언제 개발 완료 되는거죠?', SYSDATE);
INSERT INTO QNABOARD(NO, MEMBER_ID, TITLE, WRITER, CONTENT, WRITEDATE) 
VALUES(QNA_SEQ.NEXTVAL, 'JAVA','이 서비스는 도대체','김용호', '언제 개발 완료 되는거죠?', SYSDATE);
INSERT INTO QNABOARD(NO, MEMBER_ID, TITLE, WRITER, CONTENT, WRITEDATE) 
VALUES(QNA_SEQ.NEXTVAL, 'JAVA','이 서비스는 도대체','김용호', '언제 개발 완료 되는거죠?', SYSDATE);


INSERT INTO MESSAGE(MEMBER_ID,MESSAGE,SENDER,TITLE,SEND_DATE,MNO)
VALUES ('JAVA', '두번째메세지TEST', '관리자', 'TEST1', SYSDATE, MESSAGE_SEQ.NEXTVAL);
INSERT INTO MESSAGE(MEMBER_ID,MESSAGE,SENDER,TITLE,SEND_DATE,MNO)
VALUES ('JAVA', '두번째메세지TEST', '관리자', 'TEST1', SYSDATE, MESSAGE_SEQ.NEXTVAL);
INSERT INTO MESSAGE(MEMBER_ID,MESSAGE,SENDER,TITLE,SEND_DATE,MNO)
VALUES ('JAVA', '두번째메세지TEST', '관리자', 'TEST1', SYSDATE, MESSAGE_SEQ.NEXTVAL);


INSERT INTO FOLLOW(FOLLOWING_DATE,FOLLOWING,FOLLOWER) VALUES(SYSDATE,'JAVA1','JAVA');



----팔로우 임의 데이터

INSERT INTO FOLLOW(FOLLOWING_DATE,FOLLOWING,FOLLOWER)
VALUES(SYSDATE,'LIPCHEL','DD');

INSERT INTO FOLLOW(FOLLOWING_DATE,FOLLOWING,FOLLOWER)
VALUES(SYSDATE,'LIPCHEL','JAVA1');



